<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Sentinel Data Manager</title>
	<link rel="stylesheet" type="text/css" href="./css/custom.css">
	<link rel="stylesheet" type="text/css" href="./css/spectre.min.css">
  <link rel="stylesheet" type="text/css" href="./css/spectre-icons.min.css">
	<link rel="icon" type="image/png" href="/content/favicon/favicon.png" sizes="32x32">
	<script src="./js/vue.js" type="text/javascript"></script>
  </head>
  <body>
    <div id="app" class='colors-blue main'>

      <button v-show='loggedIn' v-on:click='toggleMenu()' type='button' class='btn btn-secondary userMenuButton'>
        <i class="icon icon-menu"></i>
          <span> Menu</span>
      </button>

      <template id="usermenu" v-if='menuOpen'>
        <div class="userMenu">
          <ul class="menu">
            <a href="#">
              <i class="icon icon-people"></i>
              <span> {{ credentials.username }}</span>
            </a>
            <li class="divider"></li>
            <li class="menu-item" v-on:click='toggleSettings()'>
              <a href="#">
                <i class="icon icon-more-horiz"></i>
                <span> Settings</span>
              </a>
            </li>
            <li class="menu-item" v-on:click='logout(); closeMenu()'>
              <a href="#">
                <i class="icon icon-arrow-left"></i>
                  <span> Logout</span>
              </a>
            </li>
            <li class="divider"></li>
            <li class="menu-item" v-on:click='closeProgramme()'>
              <a href="#">
                <i class="icon icon-cross"></i>
                  <span> Close Programme</span>
              </a>
            </li>
          </ul>
        </div>
      </template>

      <template v-if='loggedIn === false'>
        <div class='empty base'>
          <p>Login using your ESA Credentials</p>

          <div class="divider"></div>

          <form class='loginForm' v-on:keyup.enter="login()"  v-on:keyup.esc="hello()">
            <div class=form-group>
              <label class='form-label' for='username'>Username</label>
              <input v-bind:class="{'is-error': formError.username}" autofocus class='form-input' type="text" placeholder="Enter Username" name="username" required>
              <span class="form-input-hint" v-if='formError.username'>{{ formError.username }}</span>
            </div>

            <div class=form-group>
              <label class='form-label' for='password'>Password</label>
              <input v-bind:class="{ 'is-error': formError.password }" class='form-input' type="password" placeholder="Enter Password" name="password" required>
              <span class="form-input-hint" v-if='formError.password'>{{ formError.password }}</span>
            </div>

            <div class='form-group margin-top'>
              <label class="form-switch">
                <input type="checkbox">
                <i class="form-icon"></i><span>Remember me</span>
              </label>
            </div>

            <div class='form-group margin-top'>
              <button v-on:click='login()' type='button' name='submit' class='btn btn-primary'>Login</button>
            </div>

            <img src='logo.png' alt='NIRAS A/S' class='logo' width='160px'></img>
          </form>
        </div>
      </template>

      <template v-if='loggedIn' >
        <div class='empty base'>
          <table class="table table-striped table-hover siteTable">
            <thead>
              <tr>
                <th>Site</th>
                <th>Satellite</th>
                <th>Latest image</th>
                <th>Start date</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for='site in monitoring' class='siteTable-row'>
                <td>{{ site.name }}</td>
                <td>{{ site.satellite }}</td>
                <td>{{ site.latest }}</td>
                <td>{{ site.start }}</td>
              </tr>
            </tbody>
          </table>
          <button type="button" name="createNewSite" class='btn btn-primary margin-top' v-on:click='createNew()'>Create new</button>
        </div>
      </template>

      <template v-if='settingsOpen' >
        <div class="modal active">
          <div class="modal-overlay"></div>
          <div class="modal-container">
            <div class="modal-header">
              <button class="btn btn-clear float-right" v-on:click='toggleSettings()'></button>
              <div class="modal-title h5">Settings</div>
            </div>
            <div class="modal-body">
              <div class="content">
                <div class="form-group">
                  <label class="form-switch">
                    <input type="checkbox">
                    <i class="form-icon"></i>
                    <span>Download only metadata</span>
                  </label>
                </div>
                <div class="form-group">
                  <span>Download frequency</span>
                  <select class="form-select">
                    <option>1 hour</option>
                    <option>3 hours</option>
                    <option>6 hours</option>
                    <option>12 hours</option>
                    <option>24 hours</option>
                  </select>
                </div>
                <label for="folder">Download folder: </label>
                <button name="folder" type='button' class="btn btn-secondary" v-on:click='openFilesystem()'><span>Change</span></button>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" name="apply" class="btn btn-primary" v-on:click='toggleSettings()'>Apply</button>
            </div>
          </div>
        </div>
      </template>

    </div>
  </body>
  <script type="text/javascript">
    require('./js/init.js');
  </script>
  <!-- <script src="./js/init.js" type="text/javascript"></script> -->
</html>
